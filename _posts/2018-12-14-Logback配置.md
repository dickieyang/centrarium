---
layout: post
title:  "Logback配置"
date:   2017-12-26
author: Dickie Yang
categories: Java
tags: logback code
---

```
import ch.qos.logback.classic.AsyncAppender

//自动扫描配置变化(milliseconds,seconds,minutes,hours)
scan("30 seconds")

context.name = "APP"

statusListener(NopStatusListener)

//可定义变量,并且使用SpEl表达式
def log_path = "logs"
def log_archive = "${log_path}/archive"

appender("Console",ConsoleAppender){
    encoder(PatternLayoutEncoder){
        pattern = "%d{yyyy-MM-dd HH:mm:ss} %contextName [%thread] %-5level %logger{36} [Line:%line] - %msg%n"
    }
}

appender("File",FileAppender){
    file = "${log_path}/logback.log"
    encoder(PatternLayoutEncoder){
        pattern = "%d{yyyy-MM-dd HH:mm:ss} %contextName [%thread] %-5level %logger{36} [Line:%line] - %msg%n"
        outputPatternAsHeader = true
    }
}

appender("RollingFile",RollingFileAppender){
    file = "${log_path}/rollingBack.log"
    rollingPolicy(TimeBasedRollingPolicy){
        fileNamePattern = "${log_archive}/rolling-%d{yyyy-MM-dd}.%i.log.zip"
        maxHistory = 30
        totalSizeCap = "1KB"
    }
    encoder(PatternLayoutEncoder){
        pattern = "%d{yyyy-MM-dd HH:mm:ss} %contextName [%thread] %-5level %logger{36} [Line:%line] - %msg%n"
    }
}

appender("Async-Appender", AsyncAppender) {
    appenderRef("RollingFile")
}

root(INFO,["Console","RollingFile"])
logger("com.tronsis.mixed.service",DEBUG,["File","Console","RollingFile"],false)

```
